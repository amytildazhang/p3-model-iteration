################################################################################
#
# HMCL pipeline configuration
#
################################################################################
name: hmcl
version: 0.1
debug: true

#
# Computational resources
# 

# per-rule thread usage for parellelized rules
num_threads:
  feature_selection: 16
  train_model: 16

#
# Feature input data
# 
features:
  rna: 'rna/rnaseq_grch38_featurecounts_cpm.tsv.gz'
  cnv: 'cnv/cnv_rcgh_gene_table_log2ratio_hg38.tsv.gz'
  var: 'var/exome_variants_by_gene_grch38.tsv.gz'

#
# Cross validation
#

# parameters to use for outer repeated cross validation
cross_validation:
  num_splits: 5
  num_repeats: 3
  random_seed: 801372

#
# Model training
#
model:
  method: 'random_forest'
  num_trees: 25000

#
# Pathway aggregation
#

# minimum number of genes required for a gene set to be used for projecing
# feature data
gene_set_projection:
  enabled: true
  gene_set_min_size: 5
  aggregation_funcs:
    rna: median
    cnv: mean
    var: sum

#
# PCA projection
#

# minimum amount of total variance to be accounted for in PCA-projected versions
# of feature data
pca_projection:
  enabled: false
  scale: true
  min_variance: 0.95

#
# feature filtering
#
feature_filtering:
  rna:
    min_var_quantile: 0.25
    max_cor: 0.90
  cnv:
    min_var_quantile: 0.25
    max_cor: 0.95
  var:
    min_var_quantile: 0.25
    max_cor: 0.90

#
# Feature selection
# 
# Once the feature data has been filtered and combined into a single training set, a
# more sophisticated supervised feature selection approach may be applied.
# 
# Feature selection is performed using the Boruta wrapper method  with the Ranger
# implementation of random forests.
# 
feature_selection:
  method: rfe
  fallback: none
  min_features: 5
  max_features: 1000
  num_trees: 25000
  mtry: 4

